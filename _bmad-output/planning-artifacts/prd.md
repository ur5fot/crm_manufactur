---
stepsCompleted:
  - step-01-init
  - step-02-discovery
  - step-03-success
  - step-04-journeys
  - step-05-domain-skipped
  - step-06-innovation-skipped
  - step-07-project-type
  - step-08-scoping
  - step-09-functional
  - step-10-nonfunctional
  - step-11-polish
  - step-12-complete
inputDocuments:
  - docs/index.md
  - _bmad-output/design-thinking-2026-02-01.md
workflowType: 'prd'
briefCount: 0
researchCount: 0
brainstormingCount: 0
designThinkingCount: 1
projectDocsCount: 1
classification:
  projectType: web_app
  domain: general
  complexity: low-medium
  projectContext: brownfield
  prdScope: full-improvements
  priority: dashboard
---

# Product Requirements Document - crm_manufactur

**Author:** Dim
**Date:** 2026-02-03

## Короткий огляд (Executive Summary)

**Продукт:** Локальна CRM-система для обліку співробітників виробничого підприємства.

**Контекст:** Brownfield-проєкт — існуюча система (Vue.js 3 + Express.js, CSV-based storage, ~120 працівників) розширюється новими можливостями.

**Диференціатор:** "Відкрив систему — і одразу все зрозуміло." Замість ручного пошуку інформації в таблицях система проактивно показує повну картину стану персоналу, нагадує про події та генерує звіти за один клік.

**Цільовий користувач:** Олена — адміністратор заводу, єдиний користувач системи. Веде облік 120 працівників, щоденно відповідає на запити керівництва, управляє відпустками.

**Ключове покращення MVP:**
1. Dashboard як домашня сторінка зі статистикою та подіями
2. Розширені повідомлення про відпустки
3. Генерація звітів за запитом з експортом у CSV/Excel

**Ресурси:** Один розробник (AI-assisted), існуюча кодова база.

## Критерії успіху

### Успіх користувача

- Повна картина стану співробітників **з першого погляду** при відкритті системи
- Будь-яка інформація для керівництва — за секунди (пошук/фільтрація/звіт)
- Система **проактивно нагадує** про події відпусток
- Автоматичні розрахунки з прозорою логікою — страх помилки усунено
- Момент "aha!": "Відкрив систему — і одразу все зрозуміло"

### Бізнес-успіх

| Метрика | Було | Стало |
|---------|------|-------|
| Облік відпусток | 2 год/тиждень | 15 хв/тиждень |
| Генерація звітів | 30 хв | 1 хв (один клік) |
| Помилки в розрахунках | ~10% | 0% |
| Пропущені події відпусток | ~5/міс | 0 |
| Відповідь керівництву | довго | < 1 хв |

### Технічний успіх

- CSV файли не втрачаються та не пошкоджуються при збоях
- 100% точність розрахунків днів відпустки
- Збереження сумісності з Excel (CSV формат, UTF-8 BOM, роздільник `;`)

### Вимірювані результати

- Dashboard завантажується з повною інформацією при старті
- Кількість кліків до потрібної інформації: **max 2**
- Повідомлення про відпустки — **автоматично** без дій користувача
- Звіти генеруються **по одному кліку** в експортованому форматі

## Обсяг продукту та фазована розробка

### Стратегія MVP

**Підхід:** Problem-solving MVP — мінімальний набір, що вирішує головний біль: "Відкрив систему — і одразу все зрозуміло, можу дати будь-яку інформацію за хвилину."

**Підтримувані Journey в MVP:**
- Journey 1: "Ранковий старт" (Dashboard) — повністю
- Journey 2: "Запит від керівництва" (Reports + Export) — повністю
- Journey 3: "Оформлення відпустки" — вже реалізовано в існуючій системі
- Journey 4: "Edge case" — частково (аудит-лог вже є, перевірка "застрялих" статусів — Growth)

### MVP Feature Set (Phase 1)

| # | Функція | Journey | Обґрунтування |
|---|---------|---------|---------------|
| 1 | Dashboard як домашня сторінка | J1 | Ядро MVP — "вся картина з першого погляду" |
| 2 | Статистика по статусах (працює/відпустка/лікарняний) | J1 | Миттєве розуміння стану |
| 3 | Блок "Сьогодні" (хто йде/повертається з відпустки) | J1 | Проактивні нагадування |
| 4 | Блок "Цього тижня" (найближчі події) | J1 | Планування тижня |
| 5 | Навігація Dashboard → Зведена таблиця (один клік) | J2 | Швидкий доступ до деталей |
| 6 | Кнопки швидких звітів (відпустки зараз/цього місяця) | J2 | Відповідь керівництву < 1 хв |
| 7 | Експорт результатів фільтрації в CSV/Excel | J2 | Передача даних керівництву |
| 8 | Модальне вікно нагадування при завантаженні (розширене) | J1 | Проактивність системи |
| 9 | Авто-рефреш Dashboard кожні 5 хвилин | J1 | Актуальність даних |
| 10 | API endpoints для Dashboard та звітів | J1,J2 | Backend підтримка нових функцій |

### Phase 2 (Growth)

- Перевірка "застрялих" статусів при запуску сервера
- Відстеження термінів документів (паспорти, права) + повідомлення
- Візуальна шкала використання відпустки (використано/залишок)
- Збережені фільтри/звіти ("Всі водії Сімферополя")

### Phase 3 (Vision)

- Календар відпусток (візуальний timeline)
- Шаблони та генерація службових документів
- Desktop notifications (системні повідомлення ОС)
- Предиктивна аналітика
- Мобільна адаптація

### Стратегія мітігації ризиків

| Ризик | Мітігація |
|-------|----------|
| Монолітний App.vue стає занадто великим | Dashboard як окремий view mode, мінімальні зміни в App.vue |
| CSV цілісність при читанні/записі | Атомарний запис (temp → rename), однокористувацька система |
| Scope creep в MVP | Чітка таблиця Must-Have (10 функцій), все інше — Phase 2+ |

## Шляхи користувача (User Journeys)

### Journey 1: "Ранковий старт" — Адміністратор відкриває систему

**Персона:** Олена, адміністратор заводу, веде облік 120 працівників

**Початкова сцена:**
Олена приходить на роботу о 8:00. Раніше перше, що вона робила — відкривала Excel-таблицю і намагалась згадати: "Хто сьогодні мав повернутися з відпустки? Чи є щось терміново?" Тривога з самого ранку.

**Розвиток дії:**
Тепер вона відкриває CRM і бачить Dashboard:
- Статистика зверху: "98 працюють | 15 у відпустці | 4 на лікарняному | 3 звільнені"
- Блок "Сьогодні": "Іванов І.І. та Петров П.П. йдуть у відпустку (до 15.03)" + "Сидоров С.С. повертається з відпустки"
- Блок "Цього тижня": "2 працівники повертаються в четвер"

**Кульмінація:**
Олена бачить всю картину за 5 секунд. Нічого не треба шукати, згадувати, рахувати. Система сама показала все важливе.

**Розв'язка:**
Олена спокійно планує робочий день. Тривога зникла — система контролює за неї.

**Емоційна дуга:** Тривога → Впевненість → Спокій

**Виявлені вимоги:**
- Dashboard як домашня сторінка з автоматичним завантаженням
- Статистика по статусах працівників в реальному часі
- Блок подій "Сьогодні" та "Цього тижня"
- Модальне вікно-нагадування при першому завантаженні

### Journey 2: "Запит від керівництва" — Термінова потреба в інформації

**Початкова сцена:**
14:30, дзвонить начальник: "Хто з водіїв Сімферополя зараз на роботі? І скільки людей йде у відпустку наступного місяця? Мені потрібна ця інформація через 5 хвилин."

Раніше Олена панікувала: відкривала Excel, шукала по стовпцях, фільтрувала вручну, рахувала... Через 20 хвилин передзвонювала з неповною інформацією.

**Розвиток дії:**
Тепер Олена:
1. Переходить до зведеної таблиці (один клік з Dashboard)
2. Ставить фільтри: Посада = "Водій", Локація = "Сімферополь", Статус = "Працює"
3. Бачить результат миттєво — 8 водіїв на роботі
4. Натискає "Звіт: Відпустки наступного місяця" — отримує список з датами
5. Експортує обидва результати в Excel за один клік

**Кульмінація:**
Через 2 хвилини Олена відправляє два файли начальнику. Точні дані, без помилок.

**Розв'язка:**
Начальник задоволений швидкістю. Олена відчуває гордість — система зробила її ефективною.

**Емоційна дуга:** Паніка → Дія → Гордість

**Виявлені вимоги:**
- Швидка навігація Dashboard → Зведена таблиця (один клік)
- Мультикритеріальна фільтрація (посада + локація + статус)
- Кнопки швидких звітів ("Відпустки цього місяця")
- Експорт результатів фільтрації в CSV/Excel

### Journey 3: "Оформлення відпустки" — Повний цикл управління

**Початкова сцена:**
Працівник Коваленко підходить: "Я хочу у відпустку з 10 по 24 березня." Раніше Олена записувала на папірці, потім вносила в таблицю, вручну рахувала дні, змінювала статус... І сподівалась, що нічого не забуде.

**Розвиток дії:**
Тепер Олена:
1. Знаходить Коваленка через пошук (2 секунди)
2. Відкриває картку, вводить дати відпустки: 10.03 - 24.03
3. Система автоматично показує: "14 календарних днів. Статус зміниться автоматично 10.03"
4. Зберігає — готово

**Поворот сюжету:**
15 березня Коваленко телефонує: "Я затримаюсь ще на 3 дні, повернусь 27-го."
Олена відкриває картку, змінює дату повернення на 27.03. Система перераховує: "17 днів". Все оновлюється автоматично.

**Кульмінація:**
27 березня система автоматично змінює статус Коваленка на "Працює" та показує на Dashboard: "Коваленко К.К. повертається з відпустки сьогодні."

**Розв'язка:**
Олена не мусила пам'ятати дату повернення, не мусила вручну змінювати статус. Система зробила все сама.

**Емоційна дуга:** Рутина → Легкість → Задоволення

**Виявлені вимоги:**
- Швидкий пошук працівника
- Введення дат відпустки в картці
- Автоматична зміна статусів при настанні/закінченні відпустки *(вже є)*
- Редагування дат відпустки
- Відображення повернення на Dashboard

### Journey 4: "Щось пішло не так" — Edge Case та відновлення

**Початкова сцена:**
Олена відкриває систему і бачить дивне: працівник Мельник показується як "У відпустці", хоча він вже на роботі 3 дні.

**Розвиток дії:**
1. Олена відкриває картку Мельника — бачить дату повернення 3 дні тому
2. Перевіряє аудит-лог: останній запис — зміна статусу на "Відпустка" 2 тижні тому
3. Розуміє: автоматичне повернення не спрацювало (сервер був вимкнений в день повернення)
4. Вручну змінює статус на "Працює", очищує дати відпустки
5. Система логує зміну: "Статус змінено вручну: Відпустка → Працює"

**Кульмінація:**
Дані виправлені за 30 секунд. Аудит-лог зафіксував і проблему, і виправлення.

**Розв'язка:**
Навіть коли щось іде не так, система дозволяє швидко знайти і виправити проблему. Прозорість аудит-логу дає впевненість.

**Емоційна дуга:** Занепокоєння → Розслідування → Впевненість

**Виявлені вимоги:**
- Аудит-лог з повною історією змін *(вже є)*
- Ручне перевизначення автоматичних статусів
- CSV цілісність при збоях сервера
- Перевірка "застрялих" статусів при запуску *(Phase 2 — Growth)*

### Зведення вимог за Journey

| Можливість | J1 | J2 | J3 | J4 |
|---|---|---|---|---|
| Dashboard як домашня сторінка | + | | | |
| Статистика по статусах | + | | | |
| Блок "Сьогодні/Цього тижня" | + | | | |
| Навігація Dashboard → Таблиця | | + | | |
| Мультикритеріальна фільтрація | | + | | |
| Швидкі звіти (один клік) | | + | | |
| Експорт у CSV/Excel | | + | | |
| Пошук працівника | | | + | |
| Управління датами відпустки | | | + | |
| Автоматична зміна статусів | | | + | + |
| Аудит-лог змін | | | | + |
| Ручне перевизначення статусу | | | | + |
| Перевірка "застрялих" статусів | | | | + |

## Специфічні вимоги Web Application

### Огляд типу проєкту

Brownfield SPA (Vue.js 3 + Vite). Нові функції (Dashboard, Notifications, Reports) додаються як нові views/компоненти в існуючу архітектуру App.vue. Backend — Express.js REST API з CSV-based storage.

### Технічна архітектура

**Frontend:**
- SPA: Vue.js 3.4 + Vite 5.3
- Монолітний App.vue з новим Dashboard view
- Браузер: Google Chrome (єдиний підтримуваний)
- Desktop-only, без SEO, базова accessibility

**Backend:**
- Express.js REST API (порт 3000)
- CSV файли (UTF-8 BOM, роздільник `;`)
- Локальні папки `files/employee_[ID]/`

**Оновлення даних:**
- Dashboard оновлюється при завантаженні сторінки
- Авто-рефреш кожні 5 хвилин (автоматичне опитування сервера)

### Нові API endpoints

- `GET /api/dashboard/stats` — статистика по статусах працівників
- `GET /api/dashboard/events` — події сьогодні та цього тижня (відпустки)
- `GET /api/reports/vacations` — звіт по відпустках (з параметрами фільтрації)
- `GET /api/export` — експорт відфільтрованих даних у CSV

### Нові компоненти Frontend

- Dashboard view (новий view mode поруч з Cards/Table/Logs)
- Панель статистики (лічильники по статусах)
- Блок подій (сьогодні/цього тижня)
- Кнопки швидких звітів
- Функція експорту результатів фільтрації

## Функціональні вимоги

### Dashboard та огляд

- **FR1:** Адміністратор може бачити Dashboard як домашню сторінку при відкритті системи
- **FR2:** Адміністратор може бачити статистику працівників по статусах (працює, у відпустці, на лікарняному, звільнений) з кількістю в кожній категорії
- **FR3:** Адміністратор може бачити блок "Сьогодні" зі списком працівників, які сьогодні йдуть або повертаються з відпустки
- **FR4:** Адміністратор може бачити блок "Цього тижня" зі списком найближчих подій відпусток
- **FR5:** Система автоматично оновлює дані Dashboard кожні 5 хвилин без перезавантаження сторінки
- **FR6:** Адміністратор може перейти з Dashboard до зведеної таблиці одним кліком

### Повідомлення та нагадування

- **FR7:** Система показує модальне вікно з подіями відпусток при завантаженні сторінки
- **FR8:** Модальне вікно відображає дві секції: працівники, що йдуть у відпустку сьогодні, та працівники, що повертаються сьогодні
- **FR9:** Адміністратор може закрити модальне вікно та продовжити роботу

### Звіти та експорт

- **FR10:** Адміністратор може згенерувати звіт "Хто у відпустці зараз" одним кліком
- **FR11:** Адміністратор може згенерувати звіт "Хто йде у відпустку цього місяця" одним кліком
- **FR12:** Адміністратор може експортувати результати поточної фільтрації зведеної таблиці у CSV файл
- **FR13:** Експортований CSV файл зберігає UTF-8 BOM та роздільник `;` для сумісності з Excel

### Навігація та перегляд

- **FR14:** Адміністратор може перемикатися між режимами перегляду: Dashboard, Картки, Таблиця, Логи
- **FR15:** Система запам'ятовує Dashboard як режим перегляду за замовчуванням при завантаженні

### Управління відпустками (існуюча функціональність)

- **FR16:** Адміністратор може знайти працівника через пошук *(вже є)*
- **FR17:** Адміністратор може встановити дати початку та закінчення відпустки в картці працівника *(вже є)*
- **FR18:** Система автоматично змінює статус працівника на "Відпустка" при настанні дати початку *(вже є)*
- **FR19:** Система автоматично повертає статус працівника після закінчення дати відпустки *(вже є)*
- **FR20:** Адміністратор може редагувати дати відпустки після їх встановлення *(вже є)*
- **FR21:** Адміністратор може вручну змінити статус працівника, перевизначивши автоматичний *(вже є)*
- **FR27:** Система автоматично розраховує та відображає кількість календарних днів відпустки на основі дат початку та закінчення

### Фільтрація даних (існуюча функціональність)

- **FR22:** Адміністратор може фільтрувати зведену таблицю за кількома критеріями одночасно *(вже є)*
- **FR23:** Адміністратор може фільтрувати за полями типу select за допомогою чекбоксів *(вже є)*

### Аудит та цілісність

- **FR24:** Система логує всі зміни даних працівників з міткою часу, полем, старим та новим значенням *(вже є)*
- **FR25:** Адміністратор може переглядати журнал змін *(вже є)*
- **FR26:** Система зберігає цілісність CSV файлів при запису (атомарний запис)

## Нефункціональні вимоги

### Продуктивність

- **NFR1:** Dashboard завантажується менше ніж за 2 секунди при повному наборі даних (~120 працівників)
- **NFR2:** Пошук працівника повертає результати менше ніж за 5 секунд
- **NFR3:** Генерація звіту (відпустки зараз/цього місяця) завершується менше ніж за 30 секунд
- **NFR4:** Експорт результатів фільтрації у CSV файл завершується менше ніж за 5 секунд
- **NFR5:** Відповідь API на всі endpoints менше ніж за 500мс при нормальному навантаженні
- **NFR6:** Авто-рефреш Dashboard кожні 5 хвилин не впливає на інтерактивність інтерфейсу (фоновий запит)

### Цілісність даних

- **NFR7:** CSV файли записуються атомарно (запис у тимчасовий файл → перейменування) для запобігання втраті даних при збоях
- **NFR8:** UTF-8 BOM зберігається при кожному записі CSV файлу для сумісності з Excel
- **NFR9:** Роздільник `;` залишається незмінним у всіх CSV операціях (запис, експорт, імпорт)
- **NFR10:** 100% точність розрахунків кількості днів відпустки на основі дат початку та закінчення
